{% extends 'layouts/admin.html' %}

{% set title = "Бейджики" %}

{% from "_macros.html" import render_pagination %}

{% block content %}
<h2 class="py-3 mb-3 border-bottom text-center">
  <i class="fa-solid fa-certificate"></i>
  <span>{{ title }}</span>
</h2>

<table class="table table-striped align-middle w-75 mx-auto text-center">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Название</th>
      <th scope="col">Описание</th>
      <th scope="col">Иконка</th>
      <th scope="col">Дата создания</th>
      <th scope="col">Дата изменения</th>
      <th scope="col">Действия</th>
    </tr>
  </thead>
  <tbody>
    {% for badge in badges %}
    <tr>
      <th scope="col">{{ badge.id }}</th>
      <td>
        <span class="badge text-bg-{{ badge.color }}">{{ badge.name }}</span>
      </td>
      <td>
        {% if badge.description %}
        {{ badge.description }}
        {% else %}
        <span>—</span>
        {% endif %}
      </td>
      <td>
        <i class="{{ badge.icon }} fa-xl"></i>
      </td>
      <td>
        <time class="js-timeago" data-utc="{{ badge.created_at }}">
          <i class="fa-solid fa-circle-notch fa-spin"></i>
          <span>Загрузка...</span>
        </time>
      </td>
      <td>
        <time class="js-timeago" data-utc="{{ badge.updated_at }}">
          <i class="fa-solid fa-circle-notch fa-spin"></i>
          <span>Загрузка...</span>
        </time>
      </td>
      <td>
        <div class="btn-group btn-group-sm">
          <a href="{{ url_for('admin.badge.edit', id = badge.id) }}" class="btn btn-primary" title="Редактировать">
            <i class="fa-solid fa-pencil"></i>
          </a>
          <a href="#" class="btn btn-success" title="Список пользователей данного бейджика">
            <i class="fa-solid fa-magnifying-glass"></i>
          </a>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<div class="text-center">
  <a href="{{ url_for('admin.badge.create') }}" class="btn btn-sm btn-primary">Добавить новый бейджик</a>
</div>
<hr class="my-3">
{{ render_pagination(pagination, 'admin.badge.all') }}
{% endblock %}

{% block js %}
<script type="text/javascript">
  initTimeago()
</script>
{% endblock %}