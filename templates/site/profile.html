{% extends 'layouts/site.html' %}

{% set title = "Профиль " ~ user.username %}

{% block custom_css %}
<style>
  #content {
    background-image: url("https://i.pinimg.com/originals/92/6a/09/926a09ae459c2d427b2b1cf09d8f21db.jpg");
    background-size: 120%;       /* чуть больше, чтобы не видно было краёв */
    background-position: center; /* по центру по умолчанию */
    overflow: hidden;
  }
</style>
{% endblock %}

{% block content %}
<div class="container my-3">
  {% if user.userpage %}
  <div class="card rounded-3 shadow border-0 mb-3">
    <div class="card-body">{{ user.userpage|safe }}</div>
  </div>
  {% endif %}

  <div class="card rounded-3 shadow border-0 mb-3">
    <div class="card-body">
      <div class="row align-items-center">
        <div class="col-md-6">
          <div class="d-flex gap-3">
            {% if user.avatar_file %}
            {% else %}
            <img src="https://ui-avatars.com/api/?name={{ user.username }}&size=128" alt="{{ user.username }} avatar" class="rounded" width="128" height="128">
            {% endif %}
            <div class="d-flex flex-column text-start">
              <h2 class="fw-medium">{{ user.username }}</h2>
              {% if user.username_aka %}
              <p class="mb-0 text-secondary">(a.k.a <span class="fw-medium">{{ user.username_aka }}</span>)</p>
              {% endif %}
              <p class="mb-0 mt-auto">
                <span class="badge text-bg-success">Онлайн</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-6 text-end">
          <div class="d-flex flex-column gap-3">
            <div class="">
              <span>Рейтинг в мире</span>
              <h2 class="mb-0">#1</h2>
            </div>
            <div class="">
              <span>Рейтинг в стране</span>
              <h2 class="mb-0">#1</h2>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card rounded-3 shadow border-0">
    <div class="card-body text-center">
      <!-- 1 -->
      <span class="badge bg-primary" data-bs-toggle="tooltip" data-bs-title="Первый добытый блок">
        <i class="fa-solid fa-cube me-1"></i> Первый блок
      </span>

      <!-- 2 -->
      <span class="badge bg-success" data-bs-toggle="tooltip" data-bs-title="Достигнут хешрейт 1 GH/s">
        <i class="fa-solid fa-gauge-high me-1"></i> 1 GH/s
      </span>

      <!-- 3 -->
      <span class="badge bg-dark" data-bs-toggle="tooltip" data-bs-title="Непрерывный майнинг ночью">
        <i class="fa-solid fa-moon me-1"></i> Ночной майнер
      </span>

      <!-- 4 -->
      <span class="badge bg-warning text-dark" data-bs-toggle="tooltip" data-bs-title="Оптимизация потребления энергии">
        <i class="fa-solid fa-bolt me-1"></i> Эко-режим
      </span>

      <!-- 5 -->
      <span class="badge bg-info text-dark" data-bs-toggle="tooltip" data-bs-title="Стабильная работа в пуле">
        <i class="fa-solid fa-people-group me-1"></i> Пул-мастер
      </span>

      <!-- 6 -->
      <span class="badge bg-secondary" data-bs-toggle="tooltip" data-bs-title="Успешный апгрейд оборудования">
        <i class="fa-solid fa-microchip me-1"></i> Апгрейд
      </span>

      <!-- 7 -->
      <span class="badge bg-danger" data-bs-toggle="tooltip" data-bs-title="Пережил перебои сети без простоя">
        <i class="fa-solid fa-shield-halved me-1"></i> Анти-шторм
      </span>

      <!-- 8 -->
      <span class="badge bg-primary-subtle text-primary-emphasis border" data-bs-toggle="tooltip" data-bs-title="Добыча нескольких монет">
        <i class="fa-solid fa-coins me-1"></i> Мульти-коин
      </span>

      <!-- 9 -->
      <span class="badge bg-success-subtle text-success-emphasis border" data-bs-toggle="tooltip" data-bs-title="Развернут облачный майнинг">
        <i class="fa-solid fa-cloud me-1"></i> Облачный риг
      </span>

      <!-- 10 -->
      <span class="badge bg-secondary-subtle text-secondary-emphasis border" data-bs-toggle="tooltip" data-bs-title="30 дней без простоя">
        <i class="fa-solid fa-calendar-check me-1"></i> 30 дней аптайма
      </span>

      <!-- 11 -->
      <span class="badge bg-primary" data-bs-toggle="tooltip" data-bs-title="Добыто 100 монет">
        <i class="fa-solid fa-diamond me-1"></i> 100 монет
      </span>

      <!-- 12 -->
      <span class="badge bg-success" data-bs-toggle="tooltip" data-bs-title="10 успешных выводов средств">
        <i class="fa-solid fa-wallet me-1"></i> Вывод средств
      </span>

      <!-- 13 -->
      <span class="badge bg-warning text-dark" data-bs-toggle="tooltip" data-bs-title="Майнинг в праздничный день">
        <i class="fa-solid fa-gift me-1"></i> Holiday Mining
      </span>

      <!-- 14 -->
      <span class="badge bg-dark" data-bs-toggle="tooltip" data-bs-title="Полная защита кошелька">
        <i class="fa-solid fa-lock me-1"></i> Secure Wallet
      </span>

      <!-- 15 -->
      <span class="badge bg-info text-dark" data-bs-toggle="tooltip" data-bs-title="Настроен умный мониторинг">
        <i class="fa-solid fa-chart-line me-1"></i> Smart Monitor
      </span>

      <!-- 16 -->
      <span class="badge bg-danger" data-bs-toggle="tooltip" data-bs-title="Пережил резкий обвал сети">
        <i class="fa-solid fa-fire me-1"></i> Crash Survivor
      </span>

      <!-- 17 -->
      <span class="badge bg-secondary" data-bs-toggle="tooltip" data-bs-title="Собрал собственный риг">
        <i class="fa-solid fa-screwdriver-wrench me-1"></i> DIY Риг
      </span>

      <!-- 18 -->
      <span class="badge bg-primary" data-bs-toggle="tooltip" data-bs-title="Майнинг через мобильное устройство">
        <i class="fa-solid fa-mobile-screen me-1"></i> Mobile Miner
      </span>

      <!-- 19 -->
      <span class="badge bg-success" data-bs-toggle="tooltip" data-bs-title="Получил редкий дроп">
        <i class="fa-solid fa-star me-1"></i> Lucky Drop
      </span>

      <!-- 20 -->
      <span class="badge text-bg-warning" data-bs-toggle="tooltip" data-bs-title="Поддержал проект и получил плюшки">
        <i class="fas fa-coins me-1"></i> Инвестор
      </span>

      <!-- 21 -->
      <span class="badge bg-dark" data-bs-toggle="tooltip" data-bs-title="Добыл первую эфирку">
        <i class="fa-brands fa-ethereum me-1"></i> ETH Miner
      </span>

      <!-- 22 -->
      <span class="badge bg-info text-dark" data-bs-toggle="tooltip" data-bs-title="Использование солнечной энергии">
        <i class="fa-solid fa-sun me-1"></i> Solar Miner
      </span>

      <!-- 23 -->
      <span class="badge bg-secondary" data-bs-toggle="tooltip" data-bs-title="Майнинг на ноутбуке">
        <i class="fa-solid fa-laptop me-1"></i> Laptop Mining
      </span>

      <!-- 24 -->
      <span class="badge bg-danger" data-bs-toggle="tooltip" data-bs-title="Рекордная температура оборудования">
        <i class="fa-solid fa-temperature-high me-1"></i> Hot Rig
      </span>

      <!-- 25 -->
      <span class="badge bg-success" data-bs-toggle="tooltip" data-bs-title="Успешный обмен криптовалюты">
        <i class="fa-solid fa-right-left me-1"></i> Trade Master
      </span>

      <!-- 26 -->
      <span class="badge bg-primary" data-bs-toggle="tooltip" data-bs-title="10 000 отправленных транзакций">
        <i class="fa-solid fa-paper-plane me-1"></i> TX Sender
      </span>

      <!-- 27 -->
      <span class="badge bg-warning text-dark" data-bs-toggle="tooltip" data-bs-title="Реферальный бонус">
        <i class="fa-solid fa-user-plus me-1"></i> Referral
      </span>

      <!-- 28 -->
      <span class="badge bg-info text-dark" data-bs-toggle="tooltip" data-bs-title="Добыча в 5 разных пулах">
        <i class="fa-solid fa-network-wired me-1"></i> Pool Explorer
      </span>

      <!-- 29 -->
      <span class="badge bg-danger" data-bs-toggle="tooltip" data-bs-title="Защита от взлома">
        <i class="fa-solid fa-user-shield me-1"></i> Hackerproof
      </span>

      <!-- 30 -->
      <span class="badge bg-success-subtle text-success-emphasis border" data-bs-toggle="tooltip" data-bs-title="1 год непрерывного майнинга">
        <i class="fa-solid fa-crown me-1"></i> 1 Year Miner
      </span>

      <!-- 31 -->
      <span class="badge bg-warning text-dark" data-bs-toggle="tooltip" data-bs-title="Добыл первый биткойн">
        <i class="fa-brands fa-btc me-1"></i> BTC Found
      </span>
    </div>
  </div>
</div>
{% endblock %}

{% block custom_js %}
<script>
  const content = document.getElementById("content");

  const strength = 30; // сила смещения (px)
  const easing = 0.08; // плавность (0.1 быстрее, 0.02 медленнее)

  let targetX = 0, targetY = 0;     // куда тянуть
  let currentX = 0, currentY = 0;   // текущее положение
  let rafId = null;

  function animate() {
    currentX += (targetX - currentX) * easing;
    currentY += (targetY - currentY) * easing;

    content.style.backgroundPosition = 
      `calc(50% + ${currentX}px) calc(50% + ${currentY}px)`;

    // продолжаем анимацию только если ещё есть движение
    if (Math.abs(targetX - currentX) > 0.1 || Math.abs(targetY - currentY) > 0.1) {
      rafId = requestAnimationFrame(animate);
    } else {
      rafId = null; // стоп
    }
  }

  content.addEventListener("mousemove", (e) => {
    const rect = content.getBoundingClientRect();
    const relX = (e.clientX - rect.left) / rect.width - 0.5;
    const relY = (e.clientY - rect.top) / rect.height - 0.5;

    targetX = relX * strength;
    targetY = relY * strength;

    if (!rafId) rafId = requestAnimationFrame(animate);
  });

  content.addEventListener("mouseleave", () => {
    targetX = 0;
    targetY = 0;
    if (!rafId) rafId = requestAnimationFrame(animate);
  });
</script>
{% endblock %}